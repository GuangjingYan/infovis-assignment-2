{"ast":null,"code":"import _slicedToArray from\"/Users/yanguangjing/Desktop/infovis-assignment-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from\"react\";import*as d3 from\"d3\";import{jsx as _jsx}from\"react/jsx-runtime\";var Mainplot=function Mainplot(props){var width=props.width,height=props.height,margin=props.margin,pointSize=props.pointSize,maxPointSize=props.maxPointSize,data=props.data,movieData=props.movieData,setBrushedIndex=props.setBrushedIndex;var xPosition=data.xPosition,yPosition=data.yPosition,color=data.color,opacity=data.opacity,size=data.size;var svgWidth=margin*2+width;var svgHeight=margin*2+height;var splotSvg=useRef(null);// update state\nvar isUpdate=useRef();var colors=d3.scaleOrdinal(d3.schemeAccent);var brush=d3.brush().extent([[0,0],[width,height]]);useEffect(function(){if(!isUpdate.current){drawSplot();isUpdate.current=true;}else// remove brush section\nd3.select(\".brushSvg\").call(brush.move,null);// clear table\nsetBrushedIndex([]);// set stroke\nd3.selectAll(\"circle\").attr(\"stroke\",\"none\");updateSplot();},[data]);var drawSplot=function drawSplot(){// set xAxis & yAxis\nvar xExtent=d3.extent(movieData.map(function(d){return parseFloat(d[xPosition]);}));var yExtent=d3.extent(movieData.map(function(d){return parseFloat(d[yPosition]);}));var xScale=d3.scaleLinear().domain(xExtent).range([0,width]);var yScale=d3.scaleLinear().domain(yExtent).range([height,0]);var xAxis=d3.axisBottom(xScale);var yAxis=d3.axisLeft(yScale);var svg=d3.select(splotSvg.current).attr(\"class\",\"Splot\");var xAxisSvg=d3.select(splotSvg.current).append(\"g\").attr(\"transform\",\"translate(\".concat(margin,\",\").concat(height+margin,\")\")).attr(\"class\",\"xAxisSvg\");xAxisSvg.call(xAxis);var yAxisSvg=d3.select(splotSvg.current).append(\"g\").attr(\"transform\",\"translate(\".concat(margin,\", \").concat(margin,\")\")).attr(\"class\",\"yAxisSvg\");yAxisSvg.call(yAxis);// draw circles\nvar circleSvg=svg.append(\"g\").attr(\"transform\",\"translate(\".concat(margin,\", \").concat(margin,\")\")).attr(\"class\",\"circleSvg\");circleSvg.selectAll(\"circle\").data(movieData).enter().append(\"circle\").attr(\"cx\",function(d){return xScale(parseFloat(d[xPosition]));}).attr(\"cy\",function(d){return yScale(parseFloat(d[yPosition]));}).attr(\"class\",function(_,i){return\"circle\"+i;}).attr(\"r\",pointSize).attr(\"fill\",\"black\");// set brush\nvar brushSvg=svg.append(\"g\").attr(\"transform\",\"translate(\"+props.margin+\",\"+props.margin+\")\").attr(\"class\",\"brushSvg\");brush.on(\"start brush end\",brushed);brushSvg.call(brush);};// update scatterplot\nvar updateSplot=function updateSplot(){// set xAxis & yAxis\nvar xExtent=d3.extent(movieData.map(function(d){return parseFloat(d[xPosition]);}));var yExtent=d3.extent(movieData.map(function(d){return parseFloat(d[yPosition]);}));var rExtent=d3.extent(movieData.map(function(d){return parseFloat(d[size]);}));var oExtent=d3.extent(movieData.map(function(d){return parseFloat(d[opacity]);}));var xScale=d3.scaleLinear().domain(xExtent).range([0,width]);var yScale=d3.scaleLinear().domain(yExtent).range([height,0]);var rScale=d3.scaleLinear().domain(rExtent).range([pointSize,maxPointSize]);var oScale=d3.scaleLinear().domain(oExtent).range([0,1]);var xAxis=d3.axisBottom(xScale);var xAxisSvg=d3.select(\".xAxisSvg\");xAxisSvg.call(xAxis);var yAxis=d3.axisLeft(yScale);var yAxisSvg=d3.select(\".yAxisSvg\");yAxisSvg.call(yAxis);// set circles\nvar circleSvg=d3.select(\".circleSvg\");var circle=circleSvg.selectAll(\"circle\");circle.data(movieData).join().transition().duration(100).attr(\"cx\",function(d){return xScale(parseFloat(d[xPosition]));}).attr(\"cy\",function(d){return yScale(parseFloat(d[yPosition]));});// set circle radius\nif(size===\"none\")circle.attr(\"r\",pointSize);else{circle.data(movieData).join().attr(\"r\",function(d){return rScale(parseFloat(d[size]));});}//set circle opacity\nif(opacity===\"none\")circle.attr(\"opacity\",1);else{circle.data(movieData).join().attr(\"opacity\",function(d){return oScale(parseFloat(d[opacity]));});}//set circle color\nif(color===\"none\")circle.attr(\"fill\",\"black\");else{var colorMap=new Map();movieData.forEach(function(e,i){if(colorMap.has(e[color]))return;else colorMap.set(e[color],i);});movieData.forEach(function(e,i){circleSvg.select(\".circle\".concat(i)).attr(\"fill\",function(e){return colors(colorMap.get(e[color]));});});}// set brush\nvar brushSvg=d3.select(\".brushSvg\");brush.on(\"start brush end\",brushed);brushSvg.call(brush);};function brushed(_ref){var selection=_ref.selection;var xExtent=d3.extent(movieData.map(function(d){return parseFloat(d[xPosition]);}));var yExtent=d3.extent(movieData.map(function(d){return parseFloat(d[yPosition]);}));var xScale=d3.scaleLinear().domain(xExtent).range([0,width]);var yScale=d3.scaleLinear().domain(yExtent).range([height,0]);if(selection===null){setBrushedIndex([]);return;}var _selection=_slicedToArray(selection,2),_selection$=_slicedToArray(_selection[0],2),x0=_selection$[0],y0=_selection$[1],_selection$2=_slicedToArray(_selection[1],2),x1=_selection$2[0],y1=_selection$2[1];var insideBrush=movieData.map(function(d,i){var xCoor=xScale(parseFloat(d[xPosition]));var yCoor=yScale(parseFloat(d[yPosition]));if(xCoor>=x0&&xCoor<=x1&&yCoor>=y0&&yCoor<=y1)return true;else return false;});var insideBrushIdx=insideBrush.reduce(function(acc,cur,i){if(cur)acc.push(i);return acc;},[]);setBrushedIndex(insideBrushIdx);d3.selectAll(\"circle\").attr(\"stroke\",\"none\");insideBrushIdx.forEach(function(idx){d3.selectAll(\".circle\"+idx).attr(\"stroke\",\"black\");});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"svg\",{ref:splotSvg,width:svgWidth,height:svgHeight})});};export default Mainplot;","map":{"version":3,"names":["React","useRef","useEffect","useState","d3","jsx","_jsx","Mainplot","props","width","height","margin","pointSize","maxPointSize","data","movieData","setBrushedIndex","xPosition","yPosition","color","opacity","size","svgWidth","svgHeight","splotSvg","isUpdate","colors","scaleOrdinal","schemeAccent","brush","extent","current","drawSplot","select","call","move","selectAll","attr","updateSplot","xExtent","map","d","parseFloat","yExtent","xScale","scaleLinear","domain","range","yScale","xAxis","axisBottom","yAxis","axisLeft","svg","xAxisSvg","append","concat","yAxisSvg","circleSvg","enter","_","i","brushSvg","on","brushed","rExtent","oExtent","rScale","oScale","circle","join","transition","duration","colorMap","Map","forEach","e","has","set","get","_ref","selection","_selection","_slicedToArray","_selection$","x0","y0","_selection$2","x1","y1","insideBrush","xCoor","yCoor","insideBrushIdx","reduce","acc","cur","push","idx","children","ref"],"sources":["/Users/yanguangjing/Desktop/infovis-assignment-2/src/components/Mainplot.js"],"sourcesContent":["import React, { useRef, useEffect, useState} from \"react\";\nimport * as d3 from \"d3\";\n\nconst Mainplot = (props) => {\n  const { width, height, margin, pointSize, maxPointSize, data, movieData, setBrushedIndex } = props;\n  const { xPosition, yPosition, color, opacity, size} = data;\n\n  const svgWidth = margin * 2 + width;\n  const svgHeight = margin * 2 + height;\n  const splotSvg = useRef(null);\n  // update state\n  const isUpdate = useRef();\n  const colors = d3.scaleOrdinal(d3.schemeAccent);\n  let brush = d3.brush()\n                .extent([[0, 0], [width, height]])\n                \n  useEffect(() => {\n    if(!isUpdate.current){\n      drawSplot();\n      isUpdate.current = true;\n    }else\n      // remove brush section\n      d3.select(\".brushSvg\").call(brush.move, null);\n      // clear table\n      setBrushedIndex([]);\n      // set stroke\n      d3.selectAll(\"circle\")\n      .attr(\"stroke\", \"none\");\n      updateSplot();\n\t}, [data]);\n\n  const drawSplot = () =>{\n    // set xAxis & yAxis\n    const xExtent = d3.extent(movieData.map(d => parseFloat(d[xPosition])));\n    const yExtent = d3.extent(movieData.map(d => parseFloat(d[yPosition])));\n\n    const xScale  = d3.scaleLinear().domain(xExtent).range([0, width]);\n    const yScale  = d3.scaleLinear().domain(yExtent).range([height, 0]);\n  \n    const xAxis = d3.axisBottom(xScale)\n    const yAxis = d3.axisLeft(yScale)\n    const svg = d3.select(splotSvg.current).attr(\"class\", \"Splot\");\n\n\t\tconst xAxisSvg = d3.select(splotSvg.current)\n\t\t \t.append(\"g\")\n      .attr(\"transform\", `translate(${ margin },${ height + margin })`)\n      .attr(\"class\", \"xAxisSvg\")\n\t\t\n    xAxisSvg.call(xAxis)\n\n\t\tconst yAxisSvg = d3.select(splotSvg.current)\n\t\t  .append(\"g\")\n\t\t  .attr(\"transform\", `translate(${ margin }, ${ margin })`)\n      .attr(\"class\", \"yAxisSvg\")\n\t\t\t\n    yAxisSvg.call(yAxis)\n    // draw circles\n\t\tconst circleSvg = svg.append(\"g\").attr(\"transform\", `translate(${ margin }, ${ margin })`).attr(\"class\", \"circleSvg\")\n\n\t\tcircleSvg.selectAll(\"circle\")\n\t\t\t\t\t\t .data(movieData)\n\t\t\t\t\t\t .enter()\n\t\t\t\t\t\t .append(\"circle\")\n\t\t\t\t\t\t .attr(\"cx\", d => xScale(parseFloat(d[xPosition])))\n\t\t\t\t\t\t .attr(\"cy\", d => yScale(parseFloat(d[yPosition])))\n\t\t\t\t\t\t .attr(\"class\", (_, i) => \"circle\" + i)\n\t\t\t\t\t\t .attr(\"r\", pointSize)\n             .attr(\"fill\", \"black\")\n\n\t\t// set brush\n    const brushSvg = svg.append(\"g\")\n                        .attr(\"transform\", \"translate(\" + props.margin + \",\" + props.margin + \")\")\n                        .attr(\"class\", \"brushSvg\")\n    \n    brush.on(\"start brush end\", brushed)\n    brushSvg.call(brush);\n\n  }\n  // update scatterplot\n  const updateSplot = () =>{\n    // set xAxis & yAxis\n    const xExtent = d3.extent(movieData.map(d => parseFloat(d[xPosition])));\n    const yExtent = d3.extent(movieData.map(d => parseFloat(d[yPosition])));\n\n    const rExtent = d3.extent(movieData.map(d => parseFloat(d[size])));\n    const oExtent = d3.extent(movieData.map(d => parseFloat(d[opacity])));\n\n    const xScale  = d3.scaleLinear().domain(xExtent).range([0, width]);\n    const yScale  = d3.scaleLinear().domain(yExtent).range([height, 0]);\n    const rScale = d3.scaleLinear().domain(rExtent).range([pointSize, maxPointSize]);\n    const oScale = d3.scaleLinear().domain(oExtent).range([0, 1]);\n\n    const xAxis = d3.axisBottom(xScale);\n    const xAxisSvg = d3.select(\".xAxisSvg\")\n    xAxisSvg.call(xAxis);\n    const yAxis = d3.axisLeft(yScale);\n    const yAxisSvg = d3.select(\".yAxisSvg\")\n    yAxisSvg.call(yAxis);\n    // set circles\n    const circleSvg = d3.select(\".circleSvg\")\n    const circle = circleSvg.selectAll(\"circle\")\n    circle.data(movieData)\n    .join()\n    .transition()\n    .duration(100)\n    .attr(\"cx\", d => xScale(parseFloat(d[xPosition])))\n    .attr(\"cy\", d => yScale(parseFloat(d[yPosition])))\n    // set circle radius\n    if(size === \"none\")\n      circle.attr(\"r\",pointSize);\n    else{\n      circle.data(movieData)\n      .join()\n      .attr(\"r\", d => rScale(parseFloat(d[size])))\n    }\n    //set circle opacity\n    if(opacity === \"none\")\n    circle.attr(\"opacity\",1);\n    else{\n    circle.data(movieData)\n    .join()\n    .attr(\"opacity\", d => oScale(parseFloat(d[opacity])))\n    }\n    //set circle color\n    if(color === \"none\")\n      circle.attr(\"fill\",\"black\");\n    else{\n      const colorMap = new Map();\n      movieData.forEach( (e,i) =>{\n        if( colorMap.has(e[color]))\n          return;\n        else\n          colorMap.set(e[color],i);\n      });\n      movieData.forEach( (e,i) =>{\n        circleSvg.select(`.circle${i}`)\n         .attr(\"fill\", e => colors(colorMap.get(e[color])))\n      });\n    }\n    // set brush\n    const brushSvg = d3.select(\".brushSvg\")\n    brush.on(\"start brush end\", brushed);                     \n    brushSvg.call(brush);\n\n}\n\nfunction brushed({selection}) {\n  const xExtent = d3.extent(movieData.map(d => parseFloat(d[xPosition])));\n  const yExtent = d3.extent(movieData.map(d => parseFloat(d[yPosition])));\n\n  const xScale  = d3.scaleLinear().domain(xExtent).range([0, width]);\n  const yScale  = d3.scaleLinear().domain(yExtent).range([height, 0]);\n  if (selection === null) {\n    setBrushedIndex([]);\n    return;\n  }\n  let [[x0, y0], [x1, y1]] = selection;\n\n  const insideBrush = movieData.map((d, i) => {\n    const xCoor = xScale(parseFloat(d[xPosition]));\n    const yCoor = yScale(parseFloat(d[yPosition]));\n    if (xCoor >= x0 && xCoor <= x1 &&\n        yCoor >= y0 && yCoor <= y1\n    ) return true;\n    else return false;\n  })\n\n  const insideBrushIdx = insideBrush.reduce((acc, cur, i) => {\n    if (cur) acc.push(i);\n    return acc;\n  }, []);\n  setBrushedIndex(insideBrushIdx);\n  d3.selectAll(\"circle\").attr(\"stroke\", \"none\");\n  insideBrushIdx.forEach(idx => {\n    d3.selectAll(\".circle\" + idx)\n      .attr(\"stroke\", \"black\")\n  });\t\t\n}\n    \n  return (\n\t\t<div>\n\t\t\t<svg ref={splotSvg} width={svgWidth} height={svgHeight}> \n\t\t\t</svg>\n    </div>\n  )\n}\nexport default Mainplot;"],"mappings":"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"},"metadata":{},"sourceType":"module"}